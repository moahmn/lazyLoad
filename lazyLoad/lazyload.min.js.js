!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.lazyLoad=e()}(this,function(){function t(t){if(this.target=document.querySelectorAll(".lazy"),this.placeholder="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC",this.threshold=0,t)for(var e in t)this[e]=t[e];this.init(),this.update(),this.Event()}return t.prototype.Event=function(){var t=this;window.onscroll=function(){t.update()}},t.prototype.init=function(){for(var t=0,e=this.target.length;t<e;t++)this.target[t].loaded=!1,"IMG"===this.target[t].tagName&&null===this.target[t].getAttribute("src")&&this.target[t].setAttribute("src",this.placeholder),this.addHandler(this.target[t],"apper",this.EventHandler)},t.prototype.addHandler=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n},t.prototype.update=function(){for(var t=0,e=this.target.length;t<e;t++)if(this.needToShow(this.target[t])){var n=document.createEvent("CustomEvent");n.initCustomEvent("apper",!1,!0,"a"),this.target[t].dispatchEvent(n)}},t.prototype.EventHandler=function(){var t=this;this.loaded||(setTimeout(function(){t.setAttribute("src",t.getAttribute("data-original"))},200),this.loaded=!0)},t.prototype.needToShow=function(t){var e=document.documentElement.clientHeight||document.body.clientHeight,n=document.documentElement.scrollTop||document.body.scrollTop;if(e+n>t.offsetTop-this.threshold)return!0},t});